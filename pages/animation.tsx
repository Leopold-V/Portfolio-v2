import React, { useEffect, useRef } from 'react';
import { gsap } from 'gsap';
import { MotionPathPlugin } from "gsap/dist/MotionPathPlugin";
import styles from '../styles/pages/animation.module.scss';

gsap.registerPlugin(MotionPathPlugin);

const animation = () => {

  const rocket = useRef(null);

  useEffect(() => {
    gsap.to(rocket.current, {
    duration: 2, 
    repeat: Infinity,
    ease: "power1.inOut",
    motionPath:{
        path: "#path",
        align: "#path",
        autoRotate: 90,
        alignOrigin: [0.5, 0.5]
    }
    });
  }, []);

  return (
    <div className={styles.text}>
      Animation test page
        <svg width="100%" height="100%" viewBox="-20 0 557 190" id="svg">
            <path className={styles.path} id="path" d="M9,100c0,0,18.53-41.58,49.91-65.11c30-22.5,65.81-24.88,77.39-24.88c33.87,0,57.55,11.71,77.05,28.47c23.09,19.85,40.33,46.79,61.71,69.77c24.09,25.89,53.44,46.75,102.37,46.75c22.23,0,40.62-2.83,55.84-7.43c27.97-8.45,44.21-22.88,54.78-36.7c14.35-18.75,16.43-36.37,16.43-36.37"/>
            <g ref={rocket}>
                <path fillRule="evenodd" clipRule="evenodd" d="M53.0786 44.604V53.0892V58.7461L57.3212 62.9887L60.1497 74.3024L64.3923 72.8882V53.0892L53.0786 44.604ZM38.9365 44.604L27.6228 53.0892V72.8882L31.8654 74.3024L34.6938 62.9887L38.9365 58.7461V53.0892V44.604Z" fill="#CCCCCC"/>
                <path d="M38.9364 70.0598C40.2156 76.9095 40.9595 86.1882 43.1791 88.4446C44.8634 90.1586 47.1368 90.1735 48.8359 88.4446C51.0916 86.1507 51.6502 77.1012 53.0786 70.0598L38.9364 70.0598Z" fill="#FFCC66"/>
                <path d="M41.7649 64.4029C43.044 71.2527 42.3553 81.9639 44.5933 84.2019C46.0719 85.6805 46.1497 85.474 47.4217 84.2019C49.6965 81.9272 48.8218 71.4443 50.2502 64.4029H41.7649Z" fill="#ED7161"/>
                <path d="M43.1791 3.59177C39.0093 8.31171 31.8647 16.5141 31.8654 34.7045C31.8654 48.0843 35.7241 63.681 39.4279 72.8875H52.6748C56.3695 63.7439 60.149 48.1968 60.1497 34.7045C60.1497 16.6322 52.964 8.41707 48.836 3.59177C46.9932 1.43792 44.9129 1.62884 43.1791 3.59177Z" fill="#387AA7"/>
                <path d="M43.1791 3.59176C39.0093 8.3117 31.8647 16.5141 31.8654 34.7045C31.8647 45.6271 34.4414 58.0185 37.3999 67.2194L54.7028 67.2194C57.6331 58.0637 60.1497 45.7042 60.1497 34.7045C60.1497 16.6322 52.9641 8.41706 48.836 3.59176C46.9932 1.43792 44.9129 1.62884 43.1791 3.59176Z" fill="#48A0DC"/>
                <path d="M51.6644 29.0476C54.7886 25.9234 54.7886 20.8581 51.6644 17.7339C48.5402 14.6097 43.4749 14.6097 40.3507 17.7339C37.2265 20.8581 37.2265 25.9234 40.3507 29.0476C43.4749 32.1718 48.5402 32.1718 51.6644 29.0476Z" fill="#4D4D4D"/>
                <path d="M48.836 26.2192C50.3981 24.6571 50.3981 22.1244 48.836 20.5623C47.2739 19.0002 44.7412 19.0002 43.1791 20.5623C41.617 22.1244 41.617 24.6571 43.1791 26.2192C44.7412 27.7813 47.2739 27.7813 48.836 26.2192Z" fill="white"/>
            </g>
        </svg>
    </div>
  );
};

export default animation;
